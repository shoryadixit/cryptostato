{"ast":null,"code":"var ElementType = require(\"domelementtype\");\n\nvar isTag = exports.isTag = ElementType.isTag;\n\nexports.testElement = function (options, element) {\n  for (var key in options) {\n    if (!options.hasOwnProperty(key)) ;else if (key === \"tag_name\") {\n      if (!isTag(element) || !options.tag_name(element.name)) {\n        return false;\n      }\n    } else if (key === \"tag_type\") {\n      if (!options.tag_type(element.type)) return false;\n    } else if (key === \"tag_contains\") {\n      if (isTag(element) || !options.tag_contains(element.data)) {\n        return false;\n      }\n    } else if (!element.attribs || !options[key](element.attribs[key])) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nvar Checks = {\n  tag_name: function tag_name(name) {\n    if (typeof name === \"function\") {\n      return function (elem) {\n        return isTag(elem) && name(elem.name);\n      };\n    } else if (name === \"*\") {\n      return isTag;\n    } else {\n      return function (elem) {\n        return isTag(elem) && elem.name === name;\n      };\n    }\n  },\n  tag_type: function tag_type(type) {\n    if (typeof type === \"function\") {\n      return function (elem) {\n        return type(elem.type);\n      };\n    } else {\n      return function (elem) {\n        return elem.type === type;\n      };\n    }\n  },\n  tag_contains: function tag_contains(data) {\n    if (typeof data === \"function\") {\n      return function (elem) {\n        return !isTag(elem) && data(elem.data);\n      };\n    } else {\n      return function (elem) {\n        return !isTag(elem) && elem.data === data;\n      };\n    }\n  }\n};\n\nfunction getAttribCheck(attrib, value) {\n  if (typeof value === \"function\") {\n    return function (elem) {\n      return elem.attribs && value(elem.attribs[attrib]);\n    };\n  } else {\n    return function (elem) {\n      return elem.attribs && elem.attribs[attrib] === value;\n    };\n  }\n}\n\nfunction combineFuncs(a, b) {\n  return function (elem) {\n    return a(elem) || b(elem);\n  };\n}\n\nexports.getElements = function (options, element, recurse, limit) {\n  var funcs = Object.keys(options).map(function (key) {\n    var value = options[key];\n    return key in Checks ? Checks[key](value) : getAttribCheck(key, value);\n  });\n  return funcs.length === 0 ? [] : this.filter(funcs.reduce(combineFuncs), element, recurse, limit);\n};\n\nexports.getElementById = function (id, element, recurse) {\n  if (!Array.isArray(element)) element = [element];\n  return this.findOne(getAttribCheck(\"id\", id), element, recurse !== false);\n};\n\nexports.getElementsByTagName = function (name, element, recurse, limit) {\n  return this.filter(Checks.tag_name(name), element, recurse, limit);\n};\n\nexports.getElementsByTagType = function (type, element, recurse, limit) {\n  return this.filter(Checks.tag_type(type), element, recurse, limit);\n};","map":{"version":3,"names":["ElementType","require","isTag","exports","testElement","options","element","key","hasOwnProperty","tag_name","name","tag_type","type","tag_contains","data","attribs","Checks","elem","getAttribCheck","attrib","value","combineFuncs","a","b","getElements","recurse","limit","funcs","Object","keys","map","length","filter","reduce","getElementById","id","Array","isArray","findOne","getElementsByTagName","getElementsByTagType"],"sources":["/media/shorya/Local Disk/cryptoStato/node_modules/domutils/lib/legacy.js"],"sourcesContent":["var ElementType = require(\"domelementtype\");\nvar isTag = exports.isTag = ElementType.isTag;\n\nexports.testElement = function(options, element){\n\tfor(var key in options){\n\t\tif(!options.hasOwnProperty(key));\n\t\telse if(key === \"tag_name\"){\n\t\t\tif(!isTag(element) || !options.tag_name(element.name)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(key === \"tag_type\"){\n\t\t\tif(!options.tag_type(element.type)) return false;\n\t\t} else if(key === \"tag_contains\"){\n\t\t\tif(isTag(element) || !options.tag_contains(element.data)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(!element.attribs || !options[key](element.attribs[key])){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\nvar Checks = {\n\ttag_name: function(name){\n\t\tif(typeof name === \"function\"){\n\t\t\treturn function(elem){ return isTag(elem) && name(elem.name); };\n\t\t} else if(name === \"*\"){\n\t\t\treturn isTag;\n\t\t} else {\n\t\t\treturn function(elem){ return isTag(elem) && elem.name === name; };\n\t\t}\n\t},\n\ttag_type: function(type){\n\t\tif(typeof type === \"function\"){\n\t\t\treturn function(elem){ return type(elem.type); };\n\t\t} else {\n\t\t\treturn function(elem){ return elem.type === type; };\n\t\t}\n\t},\n\ttag_contains: function(data){\n\t\tif(typeof data === \"function\"){\n\t\t\treturn function(elem){ return !isTag(elem) && data(elem.data); };\n\t\t} else {\n\t\t\treturn function(elem){ return !isTag(elem) && elem.data === data; };\n\t\t}\n\t}\n};\n\nfunction getAttribCheck(attrib, value){\n\tif(typeof value === \"function\"){\n\t\treturn function(elem){ return elem.attribs && value(elem.attribs[attrib]); };\n\t} else {\n\t\treturn function(elem){ return elem.attribs && elem.attribs[attrib] === value; };\n\t}\n}\n\nfunction combineFuncs(a, b){\n\treturn function(elem){\n\t\treturn a(elem) || b(elem);\n\t};\n}\n\nexports.getElements = function(options, element, recurse, limit){\n\tvar funcs = Object.keys(options).map(function(key){\n\t\tvar value = options[key];\n\t\treturn key in Checks ? Checks[key](value) : getAttribCheck(key, value);\n\t});\n\n\treturn funcs.length === 0 ? [] : this.filter(\n\t\tfuncs.reduce(combineFuncs),\n\t\telement, recurse, limit\n\t);\n};\n\nexports.getElementById = function(id, element, recurse){\n\tif(!Array.isArray(element)) element = [element];\n\treturn this.findOne(getAttribCheck(\"id\", id), element, recurse !== false);\n};\n\nexports.getElementsByTagName = function(name, element, recurse, limit){\n\treturn this.filter(Checks.tag_name(name), element, recurse, limit);\n};\n\nexports.getElementsByTagType = function(type, element, recurse, limit){\n\treturn this.filter(Checks.tag_type(type), element, recurse, limit);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}